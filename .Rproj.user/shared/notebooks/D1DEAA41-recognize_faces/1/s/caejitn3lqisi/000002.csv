"0","generate_pair <- function(relationships) {"
"0","  "
"0","  random_sample <- "
"0","    sample(x = 1:nrow(relationships), replace = TRUE, size = 1)"
"0",""
"0","  parent_sample <- relationships$p1[[random_sample]]"
"0","  child_sample <- relationships$p2[[random_sample]]"
"0","  kin_or_not <- relationships$label[[random_sample]]"
"0","  "
"0","  random_family <- map2("
"0","    parent_sample,"
"0","    child_sample,"
"0","    function(parent_dir, child_dir) {"
"0","    "
"0","      c(parent_dir, child_dir) %>% "
"0","      map("
"0","        function(x) {"
"0","          next_path <- file.path(x, list.files(x)) %>% "
"0","            sample(size = 1) "
"0","          "
"0","          "
"0","          next_path <- "
"0","            next_path%>% "
"0","            map(load.image) "
"0","          "
"0","          next_path <- "
"0","            next_path %>% "
"0","            map(as.array) %>% "
"0","            array_reshape("
"0","              c(1, 224, 224, 3)"
"0","            )"
"0","        }"
"0","      )   "
"0","    }"
"0","  ) %>% .[[1]] "
"0","  "
"0","  list("
"0","    image_pair = random_family,"
"0","    label = kin_or_not "
"0","  )"
"0","}"
"0",""
